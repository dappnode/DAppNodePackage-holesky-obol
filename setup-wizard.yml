version: "2"
fields:
  - id: config_mode
    title: Config mode
    description: |
      Select 'New cluster' if this is your initial setup. For existing configurations, choose 'URL' to specify definition file URLs or 'File' to upload a compressed file containing operator configuration.
    enum:
      - "New cluster"
      - "URL"
      - "File"
    target:
      type: environment
      name: CONFIG_MODE
    required: true

  - id: definition-file-url-1
    target:
      type: environment
      name: DEFINITION_FILE_URL
      service: charon-validator-1
    title: Definition File URL for DKG ceremony in cluster 1
    description: |
      If charon 1 is already registered as an operator for the DKG ceremony, provide the definition file URL here.
    required: true
    pattern: "(https?:\/\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\/\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})"
    patternErrorMessage: Must be a valid URL (https://api.obol.tech/dv/0xf...)
    if: { "config_mode": { "enum": ["URL"] } }

  - id: compressed-file-1
    target:
      type: fileUpload
      path: /import/
      service: charon-validator-1
    title: Compressed file with operator configuration for cluster 1
    description: |
      Provide here the operator 1 configuration generated by `charon create cluster` command in _.tar.xz_ , _.tar.gz_ or _.zip_ format.
    pattern: "(\\.tar.xz|\\.tar.gz|\\.zip)"
    required: true
    if: { "config_mode": { "enum": ["File"] } }

  - id: definition-file-url-2
    target:
      type: environment
      name: DEFINITION_FILE_URL
      service: charon-validator-2
    title: Definition File URL for DKG ceremony in cluster 2
    description: |
      If charon 2 is already registered as an operator for the DKG ceremony, provide the definition file URL here.
    required: false
    pattern: "(https?:\/\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\/\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})"
    patternErrorMessage: Must be a valid URL (https://api.obol.tech/dv/0xf...)
    if: { "config_mode": { "enum": ["URL"] } }

  - id: compressed-file-2
    target:
      type: fileUpload
      path: /import/
      service: charon-validator-2
    title: Compressed file with operator configuration for cluster 2
    description: |
      Provide here the operator 2 configuration generated by `charon create cluster` command in _.tar.xz_ , _.tar.gz_ or _.zip_ format.
    pattern: "(\\.tar.xz|\\.tar.gz|\\.zip)"
    required: false
    if: { "config_mode": { "enum": ["File"] } }

  - id: definition-file-url-3
    target:
      type: environment
      name: DEFINITION_FILE_URL
      service: charon-validator-3
    title: Definition File URL for DKG ceremony in cluster 3
    description: |
      If charon 3 is already registered as an operator for the DKG ceremony, provide the definition file URL here.
    required: false
    pattern: "(https?:\/\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\/\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})"
    patternErrorMessage: Must be a valid URL (https://api.obol.tech/dv/0xf...)
    if: { "config_mode": { "enum": ["URL"] } }

  - id: compressed-file-3
    target:
      type: fileUpload
      path: /import/
      service: charon-validator-3
    title: Compressed file with operator configuration for cluster 3
    description: |
      Provide here the operator 3 configuration generated by `charon create cluster` command in _.tar.xz_ , _.tar.gz_ or _.zip_ format.
    pattern: "(\\.tar.xz|\\.tar.gz|\\.zip)"
    required: false
    if: { "config_mode": { "enum": ["File"] } }

  - id: definition-file-url-4
    target:
      type: environment
      name: DEFINITION_FILE_URL
      service: charon-validator-4
    title: Definition File URL for DKG ceremony in cluster 4
    description: |
      If charon 4 is already registered as an operator for the DKG ceremony, provide the definition file URL here.
    required: false
    pattern: "(https?:\/\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\/\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})"
    patternErrorMessage: Must be a valid URL (https://api.obol.tech/dv/0xf...)
    if: { "config_mode": { "enum": ["URL"] } }

  - id: compressed-file-4
    target:
      type: fileUpload
      path: /import/
      service: charon-validator-4
    title: Compressed file with operator configuration for cluster 4
    description: |
      Provide here the operator 4 configuration generated by `charon create cluster` command in _.tar.xz_ , _.tar.gz_ or _.zip_ format.
    pattern: "(\\.tar.xz|\\.tar.gz|\\.zip)"
    required: false
    if: { "config_mode": { "enum": ["File"] } }

  - id: definition-file-url-5
    target:
      type: environment
      name: DEFINITION_FILE_URL
      service: charon-validator-5
    title: Definition File URL for DKG ceremony in cluster 5
    description: |
      If charon 5 is already registered as an operator for the DKG ceremony, provide the definition file URL here.
    required: false
    pattern: "(https?:\/\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\/\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})"
    patternErrorMessage: Must be a valid URL (https://api.obol.tech/dv/0xf...)
    if: { "config_mode": { "enum": ["URL"] } }

  - id: compressed-file-5
    target:
      type: fileUpload
      path: /import/
      service: charon-validator-5
    title: Compressed file with operator configuration for cluster 5
    description: |
      Provide here the operator 5 configuration generated by `charon create cluster` command in _.tar.xz_ , _.tar.gz_ or _.zip_ format.
    pattern: "(\\.tar.xz|\\.tar.gz|\\.zip)"
    required: false
    if: { "config_mode": { "enum": ["File"] } }
